{% extends 'base.html' %}
{% block content %}

<div class="card">
  <h2>{{ property.title }}</h2>
  <p>{{ property.location }} • Owner: {{ property.owner.username }}</p>
  <p style="font-weight:700;">₹ {{ property.price }}</p>

  <div style="display:flex;gap:16px;align-items:flex-start;">
    <div style="flex:1;">
      {% if images %}
        <img id="main-img" src="{{ images.0.image.url }}" alt="{{ property.title }}" style="width:100%;height:auto;border-radius:8px;">
        <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;">
          {% for img in images %}
            <img src="{% if img.thumbnail %}{{ img.thumbnail.url }}{% else %}{{ img.image.url }}{% endif %}" alt="thumb" style="width:128px;height:auto;cursor:pointer;border-radius:6px;" onclick="document.getElementById('main-img').src='{{ img.image.url }}'">
          {% endfor %}
        </div>
      {% elif property.image %}
        <img src="{{ property.image.url }}" alt="{{ property.title }}" style="width:100%;height:auto;border-radius:8px;">
      {% else %}
        <div style="background:#111;min-height:220px;display:flex;align-items:center;justify-content:center;border-radius:8px;">No Image</div>
      {% endif %}
    </div>

    <div style="width:320px;">
      <div class="card">
        <h3>Details</h3>
        <p>{{ property.description }}</p>
        <p><strong>Location:</strong> {{ property.location }}</p>
        <p><strong>Owner:</strong> {{ property.owner.username }}</p>
        <a href="{% url 'send_request' property.id %}" class="btn">Book & Pay</a>
      </div>
    </div>
  </div>
</div>

{% endblock %}